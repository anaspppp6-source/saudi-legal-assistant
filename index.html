<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1a2a40; --gold: #c5a059; --bg: #f4f7f6; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 8px solid var(--primary); }
        h1 { color: var(--primary); text-align: center; font-family: 'Amiri', serif; font-size: 2.5em; margin-bottom: 10px; }
        textarea { width: 100%; height: 180px; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; font-family: 'Tajawal'; box-sizing: border-box; resize: none; outline-color: var(--gold); }
        .button-group { display: flex; gap: 10px; margin-top: 20px; }
        button { flex: 2; background: var(--primary); color: white; padding: 15px; border: none; border-radius: 10px; font-size: 18px; cursor: pointer; transition: 0.3s; font-weight: bold; }
        .btn-download { flex: 1; background: var(--gold); display: none; }
        button:hover { opacity: 0.9; transform: translateY(-2px); }
        #result { margin-top: 30px; padding: 30px; background: #fff; border: 1px solid #e0e0e0; border-radius: 10px; white-space: pre-wrap; font-family: 'Amiri', serif; font-size: 1.3em; line-height: 2; color: #222; display: none; }
        .loading { text-align: center; display: none; color: var(--gold); font-weight: bold; margin-top: 15px; }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù…Ø·ÙˆØ± */
        .tips-section { margin-top: 40px; padding: 25px; background: #fdf9f0; border-right: 5px solid var(--gold); border-radius: 8px; }
        .tips-section h3 { color: var(--primary); margin-top: 0; font-family: 'Amiri', serif; font-size: 1.5em; }
        .tips-section ul { padding-right: 20px; line-height: 1.8; color: #444; }
        .tips-section li { margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš–ï¸ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ âš–ï¸</h1>
        <p style="text-align: center; color: #666;">Ø­ÙˆÙ‘Ù„ ÙˆÙ‚Ø§Ø¦Ø¹ Ù‚Ø¶ÙŠØªÙƒ (Ø¹Ù…Ø§Ù„ÙŠØ©ØŒ Ø£Ø³Ø±ÙŠØ©ØŒ Ù…Ø¯Ù†ÙŠØ©) Ø¥Ù„Ù‰ Ù…Ø°ÙƒØ±Ø© Ø±ØµÙŠÙ†Ø© Ù„Ù…Ù†ØµØ© Ù†Ø§Ø¬Ø²</p>
        
        <textarea id="prompt" placeholder="Ø§ÙƒØªØ¨ ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: Ø£Ø±ØºØ¨ Ø¨ÙØ³Ø® Ø§Ù„Ù†ÙƒØ§Ø­ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø¶Ø±Ø±... Ø£Ùˆ: ØªÙ… ÙØµÙ„ÙŠ Ù…Ù† Ø¹Ù…Ù„ÙŠ...)" ></textarea>
        
        <div class="button-group">
            <button onclick="generate()">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© (AI)</button>
            <button id="downloadBtn" class="btn-download" onclick="printMemo()">Ø·Ø¨Ø§Ø¹Ø© / Ø­ÙØ¸ PDF</button>
        </div>
        
        <div id="loader" class="loading">â³ Ø¬Ø§Ø±ÙŠ ØµÙŠØ§ØºØ© Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø±ØµÙŠÙ†...</div>
        <div id="result"></div>

        <div class="tips-section">
            <h3>ğŸ’¡ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ù‡Ø§Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙÙŠ "Ù†Ø§Ø¬Ø²":</h3>
            <ul>
                <li><strong>Ù„Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø¹Ù…Ø§Ù„ÙŠØ©:</strong> Ø£Ø±ÙÙ‚ (Ø¹Ù‚Ø¯ Ø§Ù„Ø¹Ù…Ù„ØŒ Ø¨Ø±Ù†Øª Ø§Ù„ØªØ£Ù…ÙŠÙ†Ø§ØªØŒ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ÙØµÙ„) ÙƒØ¨ÙŠÙ†Ø§Øª Ù…Ø¤ÙŠØ¯Ø© Ù„Ù…Ø°ÙƒØ±ØªÙƒ.</li>
                <li><strong>Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ© (Ø®Ù„Ø¹/Ù†ÙÙ‚Ø©):</strong> Ø£Ø±ÙÙ‚ (Ø¹Ù‚Ø¯ Ø§Ù„Ù†ÙƒØ§Ø­ØŒ ØµÙƒÙˆÙƒ Ø§Ù„Ù…ÙˆØ§Ù„ÙŠØ¯ØŒ ÙˆÙ…Ø§ ÙŠØ«Ø¨Øª Ø§Ù„Ø¶Ø±Ø± Ø£Ùˆ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø§Ø¯ÙŠØ©).</li>
                <li><strong>ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ¶Ø¹ Ù‡ÙŠÙƒÙ„Ø§Ù‹ Ø§Ø³ØªØ±Ø´Ø§Ø¯ÙŠØ§Ù‹Ø› ØªØ£ÙƒØ¯ Ù…Ù† ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ø¯Ù‚Ø©.</li>
                <li><strong>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø®ØªØ§Ù…ÙŠØ©:</strong> Ø±Ø§Ø¬Ø¹ Ù‚Ø³Ù… "Ø§Ù„Ø·Ù„Ø¨Ø§Øª" ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø°ÙƒØ±Ø© ÙˆØªØ£ÙƒØ¯ Ø£Ù†Ù‡Ø§ ØªØ¹Ø¨Ø± Ø¹Ù† ÙƒØ§Ù…Ù„ Ø­Ù‚ÙˆÙ‚Ùƒ Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¶ÙŠ.</li>
                <li><strong>Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù…Ù„Ù:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "Ø­ÙØ¸ PDF" Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø© ÙƒÙ…Ù„Ù Ù…Ø³ØªÙ‚Ù„ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª Ø¨Ù†Ø§Ø¬Ø² Ù„Ø¶Ù…Ø§Ù† Ù…Ø¸Ù‡Ø± Ø§Ø­ØªØ±Ø§ÙÙŠ.</li>
            </ul>
        </div>
    </div>

    <script>
        async function generate() {
            const prompt = document.getElementById('prompt').value;
            const resultDiv = document.getElementById('result');
            const loader = document.getElementById('loader');
            const downloadBtn = document.getElementById('downloadBtn');

            if(!prompt) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹");

            loader.style.display = "block";
            resultDiv.style.display = "none";
            downloadBtn.style.display = "none";

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                });
                const data = await response.json();
                resultDiv.innerText = data.result;
                resultDiv.style.display = "block";
                downloadBtn.style.display = "block";
            } catch (e) {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…");
            } finally {
                loader.style.display = "none";
            }
        }

        function printMemo() {
            const text = document.getElementById('result').innerText;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Ù…Ø°ÙƒØ±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© - Ù†Ø§Ø¬Ø²</title>
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
                            body { font-family: 'Amiri', serif; direction: rtl; padding: 60px; line-height: 2; font-size: 14pt; color: #000; }
                            .header { text-align: center; margin-bottom: 40px; border-bottom: 1px solid #000; padding-bottom: 20px; }
                            .content { white-space: pre-wrap; text-align: justify; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h2>Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</h2>
                            <h3>Ù…Ø°ÙƒØ±Ø© Ø¯ÙØ§Ø¹ / Ø§Ø¯Ø¹Ø§Ø¡ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</h3>
                        </div>
                        <div class="content">${text}</div>
                    </body>
                </html>
            `);
            printWindow.document.close();
            setTimeout(() => { printWindow.print(); }, 500);
        }
    </script>
</body>
</html>
