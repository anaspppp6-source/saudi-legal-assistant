<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„Ø°ÙƒÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0f172a; --gold: #b45309; --bg: #f8fafc; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; padding: 20px; color: #1e293b; }
        .container { max-width: 950px; margin: auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); border-top: 10px solid var(--primary); }
        h1 { color: var(--primary); text-align: center; font-family: 'Amiri', serif; font-size: 2.8em; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #64748b; margin-bottom: 30px; font-size: 1.1em; }
        textarea { width: 100%; height: 200px; padding: 20px; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 16px; font-family: 'Tajawal'; box-sizing: border-box; transition: 0.3s; resize: none; background: #fff; }
        textarea:focus { border-color: var(--gold); outline: none; box-shadow: 0 0 0 3px rgba(180, 83, 9, 0.1); }
        .button-group { display: flex; gap: 15px; margin-top: 25px; }
        button { flex: 2; background: var(--primary); color: white; padding: 18px; border: none; border-radius: 12px; font-size: 18px; cursor: pointer; transition: 0.3s; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-download { flex: 1; background: var(--gold); display: none; }
        button:hover { transform: translateY(-2px); opacity: 0.95; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        #result { margin-top: 35px; padding: 40px; background: #ffffff; border: 1px solid #e2e8f0; border-right: 8px solid var(--primary); border-radius: 12px; white-space: pre-wrap; font-family: 'Amiri', serif; font-size: 1.35em; line-height: 2.1; color: #0f172a; display: none; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .loading { text-align: center; display: none; color: var(--gold); font-weight: bold; margin-top: 20px; font-size: 1.2em; }
        .tips-section { margin-top: 50px; padding: 30px; background: #fefce8; border: 1px solid #fef08a; border-right: 6px solid var(--gold); border-radius: 12px; }
        .tips-section h3 { color: var(--primary); margin-top: 0; font-family: 'Amiri', serif; font-size: 1.6em; }
        .tips-section ul { padding-right: 25px; color: #4338ca; list-style-type: square; }
        .tips-section li { margin-bottom: 12px; color: #334155; }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš–ï¸ Ø®Ø¨ÙŠØ± Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© âš–ï¸</h1>
        <p class="subtitle">ØµÙŠØ§ØºØ© Ù…Ø°ÙƒØ±Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</p>
        
        <textarea id="prompt" placeholder="Ø§Ø´Ø±Ø­ ÙˆÙ‚Ø§Ø¦Ø¹ Ù‚Ø¶ÙŠØªÙƒ Ù‡Ù†Ø§ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ (Ù…Ø«Ø§Ù„: ØªÙØ§ØµÙŠÙ„ Ø®Ù„Ø§Ù ØªØ¹Ø§Ù‚Ø¯ÙŠØŒ Ù…Ø·Ø§Ù„Ø¨Ø© Ù…Ø§Ù„ÙŠØ©ØŒ Ù‚Ø¶ÙŠØ© Ø¹Ø§Ø¦Ù„ÙŠØ©ØŒ Ø£Ùˆ ÙØµÙ„ Ø¹Ù…Ø§Ù„ÙŠ)..."></textarea>
        
        <div class="button-group">
            <button onclick="generate()">âš–ï¸ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©</button>
            <button id="downloadBtn" class="btn-download" onclick="printMemo()">ğŸ“„ Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF</button>
        </div>
        
        <div id="loader" class="loading">âš™ï¸ Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ ÙˆØ§Ø³ØªÙ†Ø¨Ø§Ø· Ø§Ù„Ø¯ÙÙˆØ¹ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©...</div>
        <div id="result"></div>

        <div class="tips-section">
            <h3>ğŸ’¡ Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø°ÙƒØ±Ø© ÙÙŠ Ù…Ù†ØµØ© "Ù†Ø§Ø¬Ø²":</h3>
            <ul>
                <li><strong>ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª:</strong> ÙŠØ¬Ø¨ Ø±ÙØ¹ ÙƒØ§ÙØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø± Ø¥Ù„ÙŠÙ‡Ø§ ÙÙŠ Ø§Ù„Ù…Ø°ÙƒØ±Ø© (Ø¹Ù‚ÙˆØ¯ØŒ Ø¥Ø´Ø¹Ø§Ø±Ø§ØªØŒ ÙÙˆØ§ØªÙŠØ±) Ù„ØªØ¹Ø²ÙŠØ² Ù‚ÙˆØ© Ø§Ù„Ø¯ÙØ¹.</li>
                <li><strong>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©:</strong> Ù‚Ù… Ø¨ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ© (Ù…Ø«Ù„: Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø¹ÙŠ) Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø§Ù„Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ø£Ø¨Ø´Ø±.</li>
                <li><strong>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:</strong> ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± "ØªØµÙ†ÙŠÙ Ø§Ù„Ø¯Ø¹ÙˆÙ‰" Ø§Ù„ØµØ­ÙŠØ­ ÙÙŠ Ù†Ø§Ø¬Ø² Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ØªÙƒÙŠÙŠÙ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ù…Ø°ÙƒØ±Ø©.</li>
                <li><strong>Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ:</strong> ÙŠÙØ¶Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± "Ø­ÙØ¸ PDF" ÙˆØ±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ù†Ø³Ù‚ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ù…Ù‡Ù†ÙŠØ© Ø£Ù…Ø§Ù… Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©.</li>
            </ul>
        </div>
    </div>

    <script>
        async function generate() {
            const prompt = document.getElementById('prompt').value;
            const resultDiv = document.getElementById('result');
            const loader = document.getElementById('loader');
            const downloadBtn = document.getElementById('downloadBtn');

            if(!prompt) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù‚Ø¶ÙŠØ© Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ");

            loader.style.display = "block";
            resultDiv.style.display = "none";
            downloadBtn.style.display = "none";

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                });
                const data = await response.json();
                resultDiv.innerText = data.result;
                resultDiv.style.display = "block";
                downloadBtn.style.display = "block";
            } catch (e) {
                alert("ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹");
            } finally {
                loader.style.display = "none";
            }
        }

        function printMemo() {
            const text = document.getElementById('result').innerText;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Ù…Ø°ÙƒØ±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø±Ø³Ù…ÙŠØ©</title>
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
                            body { font-family: 'Amiri', serif; direction: rtl; padding: 50px 80px; line-height: 2.2; font-size: 15pt; color: #000; }
                            .header { text-align: center; margin-bottom: 50px; border-bottom: 2px solid #000; padding-bottom: 20px; }
                            .content { white-space: pre-wrap; text-align: justify; }
                            .footer { margin-top: 50px; text-align: left; font-weight: bold; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h2 style="margin:0;">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</h2>
                            <h3 style="margin:5px;">Ù…Ø°ÙƒØ±Ø© Ø¯Ø¹ÙˆÙ‰ / Ø¬ÙˆØ§Ø¨ÙŠØ©</h3>
                        </div>
                        <div class="content">${text}</div>
                        <div class="footer">ÙˆØ§Ù„Ù„Ù‡ ÙˆÙ„ÙŠ Ø§Ù„ØªÙˆÙÙŠÙ‚ ØŒØŒØŒ</div>
                    </body>
                </html>
            `);
            printWindow.document.close();
            setTimeout(() => { printWindow.print(); }, 500);
        }
    </script>
</body>
</html>
