<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ | Ù…Ù†ØµØ© Ø§Ù„Ø®Ø¨ÙŠØ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚ ÙØ§Ø¦Ù‚: Ø£Ù„ÙˆØ§Ù† Ù…Ø³ØªÙˆØ­Ø§Ø© Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø© */
        :root { 
            --primary: #122c34; /* ÙƒØ­Ù„ÙŠ Ù…Ù„ÙƒÙŠ */
            --gold: #ad8b3a;    /* Ø°Ù‡Ø¨ÙŠ Ù…Ø·ÙÙŠ */
            --bg: #f4f7f6;      /* Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ Ø¬Ø¯Ø§Ù‹ */
            --accent: #2c5e5e;  /* Ø£Ø®Ø¶Ø± Ø²Ù…Ø±Ø¯ÙŠ ØºØ§Ù…Ù‚ */
        }

        body { 
            font-family: 'Tajawal', sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            padding: 40px 20px; 
            color: #333; 
        }

        .container { 
            max-width: 900px; 
            margin: auto; 
            background: #ffffff; 
            padding: 50px; 
            border-radius: 12px; 
            box-shadow: 0 4px 25px rgba(0,0,0,0.08); 
            border-top: 8px solid var(--primary); 
            position: relative;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„ÙƒØ¨Ø±Ù‰ */
        .header-section { text-align: center; margin-bottom: 40px; }
        h1 { 
            color: var(--primary); 
            font-family: 'Amiri', serif; 
            font-size: 2.8em; 
            margin: 0; 
            letter-spacing: -1px;
        }
        .subtitle { 
            color: var(--gold); 
            font-weight: 700; 
            font-size: 1.1em; 
            margin-top: 10px; 
            text-transform: uppercase;
        }

        /* Ø­Ù‚Ù„ Ø§Ù„Ù†Øµ */
        textarea { 
            width: 100%; 
            height: 220px; 
            padding: 20px; 
            border: 1px solid #d1d5db; 
            border-radius: 8px; 
            font-size: 17px; 
            font-family: 'Tajawal'; 
            box-sizing: border-box; 
            transition: all 0.3s ease; 
            background: #fafafa; 
            line-height: 1.8;
        }
        textarea:focus { 
            border-color: var(--primary); 
            outline: none; 
            background: #fff; 
            box-shadow: 0 0 0 4px rgba(18, 44, 52, 0.05); 
        }

        /* Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .button-group { display: flex; gap: 15px; margin-top: 30px; }
        
        button { 
            flex: 2; 
            background: var(--primary); 
            color: white; 
            padding: 18px; 
            border: none; 
            border-radius: 6px; 
            font-size: 18px; 
            cursor: pointer; 
            transition: 0.3s; 
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 12px; 
        }

        .btn-download { 
            flex: 1; 
            background: var(--gold); 
            display: none; 
        }

        button:hover { 
            filter: brightness(1.2); 
            transform: translateY(-2px); 
        }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø·Ø±Ù‚Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .loading-container { 
            display: none; 
            text-align: center; 
            margin-top: 30px; 
            padding: 20px;
        }
        .gavel-icon { 
            font-size: 50px; 
            color: var(--gold); 
            animation: hammer 0.8s infinite ease-in-out alternate; 
        }
        @keyframes hammer {
            0% { transform: rotate(-20deg); }
            100% { transform: rotate(40deg); }
        }
        .loading-text { 
            color: var(--primary); 
            font-weight: bold; 
            margin-top: 15px; 
            font-size: 1.1em; 
        }

        /* Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© */
        #result { 
            margin-top: 40px; 
            padding: 40px; 
            background: #fff; 
            border: 1px solid #eee; 
            border-right: 6px solid var(--gold); 
            border-radius: 4px; 
            white-space: pre-wrap; 
            font-family: 'Amiri', serif; 
            font-size: 1.4em; 
            line-height: 2.2; 
            color: #1a1a1a; 
            display: none; 
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.02);
        }

        /* Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ù†Ø§Ø¬Ø² Ø§Ù„Ù…Ù†Ø³Ù‚Ø© */
        .tips-section { 
            margin-top: 50px; 
            padding: 30px; 
            background: #f9fafb; 
            border-radius: 8px; 
            border-left: 4px solid var(--primary); 
        }
        .tips-section h3 { 
            color: var(--primary); 
            margin-top: 0; 
            font-size: 1.4em; 
            border-bottom: 1px solid #ddd; 
            padding-bottom: 10px; 
        }
        .tips-section ul { padding-right: 20px; }
        .tips-section li { margin-bottom: 12px; color: #4b5563; }

    </style>
</head>
<body>

    <div class="container">
        <div class="header-section">
            <h1>âš–ï¸ Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</h1>
            <div class="subtitle">Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
        </div>
        
        <textarea id="prompt" placeholder="Ø§Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‚Ø¶ÙŠØ© Ù„ÙŠØªÙ… ØªØ­Ù„ÙŠÙ„Ù‡Ø§ ÙˆØªÙƒÙŠÙŠÙÙ‡Ø§ Ù†Ø¸Ø§Ù…ÙŠØ§Ù‹..."></textarea>
        
        <div class="button-group">
            <button onclick="generate()">
                <i class="fas fa-magic"></i> ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©
            </button>
            <button id="downloadBtn" class="btn-download" onclick="printMemo()">
                <i class="fas fa-file-pdf"></i> Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF
            </button>
        </div>
        
        <div id="loader" class="loading-container">
            <i class="fas fa-gavel gavel-icon"></i>
            <div class="loading-text">Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ­Ø¶Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ù†ÙŠØ¯ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ© ÙˆØªÙƒÙŠÙŠÙ Ø§Ù„Ø¯Ø¹ÙˆÙ‰...</div>
        </div>

        <div id="result"></div>

        <div class="tips-section">
            <h3>ğŸ’¡ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø³Ù…ÙŠ (Ù†Ø§Ø¬Ø²)</h3>
            <ul>
                <li><strong>Ø§Ù„ØªÙƒÙŠÙŠÙ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:</strong> Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©Ø› ØªØ£ÙƒØ¯ Ù…Ù† ØªØ¹Ø¨Ø¦Ø© ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ Ø¨Ø¯Ù‚Ø©.</li>
                <li><strong>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø®ØªØ§Ù…ÙŠØ©:</strong> Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ù„Ø¶Ù…Ø§Ù† Ø´Ù…ÙˆÙ„Ù‡Ø§ Ù„ÙƒØ§ÙØ© Ù…Ø³ØªØ­Ù‚Ø§ØªÙƒ.</li>
                <li><strong>Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª Ø§Ù„ÙÙ†ÙŠØ©:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ø± Ø­ÙØ¸ PDF Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ù„Ù Ù…Ù†Ø³Ù‚ ÙˆØ§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©.</li>
            </ul>
        </div>
    </div>

    <script>
        async function generate() {
            const prompt = document.getElementById('prompt').value;
            const resultDiv = document.getElementById('result');
            const loader = document.getElementById('loader');
            const downloadBtn = document.getElementById('downloadBtn');

            if(!prompt) return alert("ÙŠØ±Ø¬Ù‰ ÙˆØµÙ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹.");

            loader.style.display = "block";
            resultDiv.style.display = "none";
            downloadBtn.style.display = "none";

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                });
                const data = await response.json();
                resultDiv.innerText = data.result;
                resultDiv.style.display = "block";
                downloadBtn.style.display = "block";
            } catch (e) {
                alert("ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø°ÙƒÙŠ.");
            } finally {
                loader.style.display = "none";
            }
        }

        function printMemo() {
            const text = document.getElementById('result').innerText;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Ù…Ø°ÙƒØ±Ø© Ù‚Ø¶Ø§Ø¦ÙŠØ© - Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø¨ÙŠØ±</title>
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
                            body { font-family: 'Amiri', serif; direction: rtl; padding: 60px; line-height: 2.2; font-size: 15pt; }
                            .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 20px; margin-bottom: 40px; }
                            .content { white-space: pre-wrap; text-align: justify; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h2>Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</h2>
                            <h3>Ù…Ø°ÙƒØ±Ø© Ø¯Ø¹ÙˆÙ‰ / Ø¯ÙØ§Ø¹</h3>
                        </div>
                        <div class="content">${text}</div>
                    </body>
                </html>
            `);
            printWindow.document.close();
            setTimeout(() => { printWindow.print(); }, 500);
        }
    </script>
</body>
</html>
