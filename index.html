<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ | Ù…Ù†ØµØ© Ø§Ù„Ø®Ø¨ÙŠØ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --primary: #122c34; 
            --gold: #ad8b3a;    
            --bg: #f4f7f6;      
        }

        body { 
            font-family: 'Tajawal', sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            padding: 20px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø´Ùˆ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ */
            color: #333; 
        }

        .container { 
            max-width: 900px; 
            margin: auto; 
            background: #ffffff; 
            padding: 30px; /* Ø­Ø´Ùˆ Ù…Ø±Ù† */
            border-radius: 12px; 
            box-shadow: 0 4px 25px rgba(0,0,0,0.08); 
            border-top: 8px solid var(--primary); 
        }

        h1 { 
            color: var(--primary); 
            font-family: 'Amiri', serif; 
            font-size: 2.2em; /* Ø­Ø¬Ù… Ø®Ø· Ù…ØªÙƒÙŠÙ */
            margin: 0; 
            text-align: center;
        }

        .subtitle { 
            color: var(--gold); 
            font-weight: 700; 
            font-size: 1em; 
            margin-top: 10px; 
            text-align: center;
            margin-bottom: 30px;
        }

        textarea { 
            width: 100%; 
            height: 200px; 
            padding: 15px; 
            border: 1px solid #d1d5db; 
            border-radius: 8px; 
            font-size: 16px; 
            font-family: 'Tajawal'; 
            box-sizing: border-box; 
            background: #fafafa; 
        }

        /* Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ø±Ù†Ø©: Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶ ÙÙŠ Ø§Ù„Ù…Ø§ÙƒØŒ ÙˆØªØ­Øª Ø¨Ø¹Ø¶ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ */
        .button-group { 
            display: flex; 
            flex-wrap: wrap; /* ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ù†Ø²ÙˆÙ„ Ù„Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯ */
            gap: 10px; 
            margin-top: 25px; 
        }
        
        button { 
            flex: 1 1 200px; /* ÙŠØªÙ…Ø¯Ø¯ Ù„ÙŠÙ…Ù„Ø£ Ø§Ù„Ù…Ø³Ø§Ø­Ø© */
            background: var(--primary); 
            color: white; 
            padding: 16px; 
            border: none; 
            border-radius: 6px; 
            font-size: 17px; 
            cursor: pointer; 
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 10px; 
        }

        .btn-download { background: var(--gold); display: none; }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø·Ø±Ù‚Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .loading-container { display: none; text-align: center; margin-top: 25px; }
        .gavel-icon { font-size: 40px; color: var(--gold); animation: hammer 0.8s infinite ease-in-out alternate; }
        @keyframes hammer { 0% { transform: rotate(-20deg); } 100% { transform: rotate(40deg); } }

        #result { 
            margin-top: 30px; 
            padding: 20px; 
            background: #fff; 
            border-right: 5px solid var(--gold); 
            border-radius: 4px; 
            white-space: pre-wrap; 
            font-family: 'Amiri', serif; 
            font-size: 1.3em; 
            line-height: 1.8; 
            display: none; 
            overflow-x: auto; /* ÙŠÙ…Ù†Ø¹ Ø®Ø±ÙˆØ¬ Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ */
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© (Ø§Ù„Ø¬ÙˆØ§Ù„) */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 20px; }
            h1 { font-size: 1.8em; }
            button { font-size: 16px; padding: 14px; }
        }

        .tips-section { 
            margin-top: 40px; 
            padding: 20px; 
            background: #f9fafb; 
            border-radius: 8px; 
            font-size: 0.9em;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>âš–ï¸ Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</h1>
        <div class="subtitle">Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
        
        <textarea id="prompt" placeholder="Ø§Ø´Ø±Ø­ ØªÙØ§ØµÙŠÙ„ Ù‚Ø¶ÙŠØªÙƒ Ù‡Ù†Ø§..."></textarea>
        
        <div class="button-group">
            <button onclick="generate()"><i class="fas fa-magic"></i> ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø°ÙƒØ±Ø©</button>
            <button id="downloadBtn" class="btn-download" onclick="printMemo()"><i class="fas fa-file-pdf"></i> Ø­ÙØ¸ PDF</button>
        </div>
        
        <div id="loader" class="loading-container">
            <i class="fas fa-gavel gavel-icon"></i>
            <div style="margin-top:10px; font-weight:bold;">Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹...</div>
        </div>

        <div id="result"></div>

        <div class="tips-section">
            <h3 style="margin-top:0; color:var(--primary);">ğŸ’¡ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
            <ul style="padding-right:20px; color:#555;">
                <li>Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚ÙˆØ§Ø³ Ù‚Ø¨Ù„ ØªÙ‚Ø¯ÙŠÙ…Ù‡Ø§.</li>
                <li>Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ø± PDF Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø±Ø³Ù…ÙŠ.</li>
            </ul>
        </div>
    </div>

    <script>
        async function generate() {
            const prompt = document.getElementById('prompt').value;
            const resultDiv = document.getElementById('result');
            const loader = document.getElementById('loader');
            const downloadBtn = document.getElementById('downloadBtn');

            if(!prompt) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹.");
            loader.style.display = "block";
            resultDiv.style.display = "none";
            downloadBtn.style.display = "none";

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                });
                const data = await response.json();
                resultDiv.innerText = data.result;
                resultDiv.style.display = "block";
                downloadBtn.style.display = "flex";
            } catch (e) {
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.");
            } finally {
                loader.style.display = "none";
            }
        }

        function printMemo() {
            const text = document.getElementById('result').innerText;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Ù…Ø°ÙƒØ±Ø© Ù‚Ø¶Ø§Ø¦ÙŠØ©</title>
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');
                            body { font-family: 'Amiri', serif; direction: rtl; padding: 40px; line-height: 2; font-size: 14pt; }
                            .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 30px; }
                            .content { white-space: pre-wrap; text-align: justify; }
                        </style>
                    </head>
                    <body>
                        <div class="header"><h2>Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</h2><h3>Ù…Ø°ÙƒØ±Ø© Ø¯Ø¹ÙˆÙ‰</h3></div>
                        <div class="content">${text}</div>
                    </body>
                </html>
            `);
            printWindow.document.close();
            setTimeout(() => { printWindow.print(); }, 500);
        }
    </script>
</body>
</html>
